From 72f77986ea6281e56e15fdaf96893f086de3b23b Mon Sep 17 00:00:00 2001
From: Spottedleaf <Spottedleaf@users.noreply.github.com>
Date: Sun, 19 Apr 2020 07:25:54 -0700
Subject: [PATCH] fixup! Load Chunks for Login Asynchronously


diff --git a/src/main/java/net/minecraft/server/PlayerList.java b/src/main/java/net/minecraft/server/PlayerList.java
index f28e66147..d145c4bf1 100644
--- a/src/main/java/net/minecraft/server/PlayerList.java
+++ b/src/main/java/net/minecraft/server/PlayerList.java
@@ -135,7 +135,7 @@ public abstract class PlayerList {
 
         // Paper start - async load spawn in chunk
         WorldServer finalWorldserver = worldserver;
-        worldserver.getChunkProvider().getChunkAtAsynchronously(loc.getBlockX() >> 4, loc.getBlockZ() >> 4, true, (chunk -> {
+        worldserver.getChunkProvider().getTickingChunkAsync(loc.getBlockX() >> 4, loc.getBlockZ() >> 4, (chunk -> { // use ticking - as it has at least 1 neighbours loaded
             if (networkmanager.isConnected()) {
                 postChunkLoadJoin(entityplayer, finalWorldserver, nbttagcompound, networkmanager, lastKnownName, networkmanager.getSocketAddress().toString());
             }
-- 
2.26.0

