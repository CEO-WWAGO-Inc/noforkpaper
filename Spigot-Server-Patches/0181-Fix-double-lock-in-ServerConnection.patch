From 44d3af8f6e0fc55f10f6687304f446553627ba73 Mon Sep 17 00:00:00 2001
From: Alfie Cleveland <alfeh@me.com>
Date: Wed, 23 Nov 2016 19:43:34 +0000
Subject: [PATCH] Fix double lock in ServerConnection


diff --git a/src/main/java/net/minecraft/server/ServerConnection.java b/src/main/java/net/minecraft/server/ServerConnection.java
index 5cde4be..d43a505 100644
--- a/src/main/java/net/minecraft/server/ServerConnection.java
+++ b/src/main/java/net/minecraft/server/ServerConnection.java
@@ -63,11 +63,9 @@ public class ServerConnection {
     // Paper start - prevent blocking on adding a new network manager while the server is ticking
     private final List<NetworkManager> pending = Collections.synchronizedList(Lists.<NetworkManager>newArrayList());
     private void addPending() {
-        synchronized (pending) {
-            synchronized (this.h) { // Paper - OBFHELPER - List of network managers
-                this.h.addAll(pending);
-                pending.clear();
-            }
+        synchronized (pending) { // Paper - OBFHELPER - List of network managers
+            this.h.addAll(pending);
+            pending.clear();
         }
     }
     // Paper end
-- 
2.9.3 (Apple Git-75)

