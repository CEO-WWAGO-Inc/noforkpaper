From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: TheShermanTanker <tanksherman27@gmail.com>
Date: Wed, 12 Aug 2020 02:06:35 +0800
Subject: [PATCH] Add-Option-to-disable-Witch-Transforms


diff --git a/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java b/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java
index e471e764935e2a89560de56959a782b02e5e8fe1..2a57a8a66a22a76853bb02e349a497c8765d77ec 100644
--- a/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java
+++ b/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java
@@ -72,6 +72,11 @@ public class PaperWorldConfig {
         return config.getString("world-settings." + worldName + "." + path, config.getString("world-settings.default." + path));
     }
 
+    public boolean witchConversion;
+    private void advancedSurvivalSettings() { //More may be added later
+        witchConversion = getBoolean("advanced-survival-settings.witch-conversions", true);
+    }
+
     public int cactusMaxHeight;
     public int reedMaxHeight;
     private void blockGrowthHeight() {
diff --git a/src/main/java/net/minecraft/server/EntityVillager.java b/src/main/java/net/minecraft/server/EntityVillager.java
index bf019043a9338aca8d91da809f1d5520531386e7..1590b430d6f86fd215b0108e2fccb24fe549ef3e 100644
--- a/src/main/java/net/minecraft/server/EntityVillager.java
+++ b/src/main/java/net/minecraft/server/EntityVillager.java
@@ -722,6 +722,7 @@ public class EntityVillager extends EntityVillagerAbstract implements Reputation
 
     @Override
     public void onLightningStrike(EntityLightning entitylightning) {
+        if(!this.world.paperConfig.witchConversion) { super.onLightningStrike(entitylightning); return; } //Paper - Add Option to disable turning to Witch
         if (this.world.getDifficulty() != EnumDifficulty.PEACEFUL) {
             EntityVillager.LOGGER.info("Villager {} was struck by lightning {}.", this, entitylightning);
             EntityWitch entitywitch = (EntityWitch) EntityTypes.WITCH.a(this.world);
