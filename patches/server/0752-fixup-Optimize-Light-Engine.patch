From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Spottedleaf <Spottedleaf@users.noreply.github.com>
Date: Wed, 25 Aug 2021 08:29:35 -0700
Subject: [PATCH] fixup! Optimize Light Engine


diff --git a/src/main/java/net/minecraft/server/level/ThreadedLevelLightEngine.java b/src/main/java/net/minecraft/server/level/ThreadedLevelLightEngine.java
index f0df7b2bd618c7be18c4c86f735b303dc73d98ad..833b6b2193cf08e123aabb344f2283730aed1bcd 100644
--- a/src/main/java/net/minecraft/server/level/ThreadedLevelLightEngine.java
+++ b/src/main/java/net/minecraft/server/level/ThreadedLevelLightEngine.java
@@ -31,15 +31,6 @@ public class ThreadedLevelLightEngine extends LevelLightEngine implements AutoCl
     // Paper start
     private static final int MAX_PRIORITIES = ChunkMap.MAX_CHUNK_DISTANCE + 2;
 
-    private boolean isChunkLightStatus(long pair) {
-        ChunkHolder playerChunk = playerChunkMap.getVisibleChunkIfPresent(pair);
-        if (playerChunk == null) {
-            return false;
-        }
-        ChunkStatus status = ChunkHolder.getStatus(playerChunk.getTicketLevel());
-        return status != null && status.isOrAfter(ChunkStatus.LIGHT);
-    }
-
     static class ChunkLightQueue {
         public boolean shouldFastUpdate;
         java.util.ArrayDeque<Runnable> pre = new java.util.ArrayDeque<Runnable>();
@@ -281,11 +272,6 @@ public class ThreadedLevelLightEngine extends LevelLightEngine implements AutoCl
         IntSupplier prioritySupplier = playerChunkMap.getChunkQueueLevel(pair);
         boolean[] skippedPre = {false};
         this.queue.addChunk(pair, prioritySupplier, Util.name(() -> {
-            if (!isChunkLightStatus(pair)) {
-                future.complete(chunk);
-                skippedPre[0] = true;
-                return;
-            }
             // Paper end
             LevelChunkSection[] levelChunkSections = chunk.getSections();
 
