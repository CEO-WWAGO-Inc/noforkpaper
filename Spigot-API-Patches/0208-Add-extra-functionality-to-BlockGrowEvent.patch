From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Tom <cryptite@gmail.com>
Date: Wed, 13 May 2020 08:48:56 -0500
Subject: [PATCH] Add extra functionality to BlockGrowEvent


diff --git a/src/main/java/org/bukkit/event/block/BlockFormEvent.java b/src/main/java/org/bukkit/event/block/BlockFormEvent.java
index 0106780414abf8cdacd07b8e1435d619bf96bdb3..5465b8ece9481fe335debdc87ba434b120bab468 100644
--- a/src/main/java/org/bukkit/event/block/BlockFormEvent.java
+++ b/src/main/java/org/bukkit/event/block/BlockFormEvent.java
@@ -27,7 +27,7 @@ public class BlockFormEvent extends BlockGrowEvent {
     private static final HandlerList handlers = new HandlerList();
 
     public BlockFormEvent(@NotNull final Block block, @NotNull final BlockState newState) {
-        super(block, newState);
+        super(block, null, newState); //Paper
     }
 
     @NotNull
diff --git a/src/main/java/org/bukkit/event/block/BlockGrowEvent.java b/src/main/java/org/bukkit/event/block/BlockGrowEvent.java
index 73d5375d2f67ee00204d80308828cd9f2b2f17e8..21463c8a1610e8fa4a84e49f7a540723e23e4423 100644
--- a/src/main/java/org/bukkit/event/block/BlockGrowEvent.java
+++ b/src/main/java/org/bukkit/event/block/BlockGrowEvent.java
@@ -2,9 +2,12 @@ package org.bukkit.event.block;
 
 import org.bukkit.block.Block;
 import org.bukkit.block.BlockState;
+import org.bukkit.block.data.BlockData;
+import org.bukkit.entity.Player;
 import org.bukkit.event.Cancellable;
 import org.bukkit.event.HandlerList;
 import org.jetbrains.annotations.NotNull;
+import org.jetbrains.annotations.Nullable;
 
 /**
  * Called when a block grows naturally in the world.
@@ -12,6 +15,7 @@ import org.jetbrains.annotations.NotNull;
  * Examples:
  * <ul>
  * <li>Wheat
+ * <li>Grass/Flowers from bone-mealing a grass block
  * <li>Sugar Cane
  * <li>Cactus
  * <li>Watermelon
@@ -24,10 +28,12 @@ import org.jetbrains.annotations.NotNull;
 public class BlockGrowEvent extends BlockEvent implements Cancellable {
     private static final HandlerList handlers = new HandlerList();
     private final BlockState newState;
+    private final Player player;
     private boolean cancelled = false;
 
-    public BlockGrowEvent(@NotNull final Block block, @NotNull final BlockState newState) {
+    public BlockGrowEvent(@NotNull final Block block, @Nullable Player player, @NotNull final BlockState newState) {
         super(block);
+        this.player = player;
         this.newState = newState;
     }
 
@@ -41,6 +47,23 @@ public class BlockGrowEvent extends BlockEvent implements Cancellable {
         return newState;
     }
 
+    /**
+     * Sets the BlockData of the block that will form.
+     */
+    public void setNewData(@NotNull BlockData blockData) {
+        newState.setBlockData(blockData);
+    }
+
+    /**
+     * Gets the Player that caused this
+     *
+     * @return The Player that caused this block to grow, or null if not grown by a Player
+     */
+    @Nullable
+    public Player getPlayer() {
+        return player;
+    }
+
     @Override
     public boolean isCancelled() {
         return cancelled;
