From d25983b197588722513fd00867c2f83fdec9f682 Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Wed, 12 Sep 2018 21:12:57 -0400
Subject: [PATCH] Prevent mob spawning from loading/generating chunks


diff --git a/src/main/java/net/minecraft/server/SpawnerCreature.java b/src/main/java/net/minecraft/server/SpawnerCreature.java
index 387570ed67..0661ea20d8 100644
--- a/src/main/java/net/minecraft/server/SpawnerCreature.java
+++ b/src/main/java/net/minecraft/server/SpawnerCreature.java
@@ -129,7 +129,8 @@ public final class SpawnerCreature {
                             int i2 = blockposition1.getX();
                             int j2 = blockposition1.getY();
                             int k2 = blockposition1.getZ();
-                            IBlockData iblockdata = worldserver.getType(blockposition1);
+                            IBlockData iblockdata = worldserver.getTypeIfLoaded(blockposition1);  // Paper - don't load chunks for mob spawn
+                            if (iblockdata == null) continue; // Paper - don't load chunks for mob spawn
 
                             if (!iblockdata.isOccluding()) {
                                 int l2 = 0;
@@ -168,6 +169,7 @@ public final class SpawnerCreature {
                                                     }
 
                                                     if (worldserver.a(enumcreaturetype, biomebase_biomemeta, (BlockPosition) blockposition_mutableblockposition)) {
+                                                        if (!worldserver.isLoaded(blockposition_mutableblockposition)) continue; // Paper - don't load chunks for mob spawn
                                                         EntityPositionTypes.Surface entitypositiontypes_surface = EntityPositionTypes.a(biomebase_biomemeta.b);
                                                         if (entitypositiontypes_surface != null && a(entitypositiontypes_surface, worldserver, blockposition_mutableblockposition, biomebase_biomemeta.b)) {
                                                             EntityInsentient entityinsentient;
-- 
2.18.0

