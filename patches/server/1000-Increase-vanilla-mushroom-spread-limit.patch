From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: grayr0ot <thisis41@protonmail.com>
Date: Wed, 9 Aug 2023 22:04:15 +0200
Subject: [PATCH] Increase vanilla mushroom spread limit


diff --git a/src/main/java/net/minecraft/world/level/block/MushroomBlock.java b/src/main/java/net/minecraft/world/level/block/MushroomBlock.java
index 5238b23cd3bca21e2b14c9be15699b95ad267e24..ed9ee4d01c69333557824e9f4448a7eaeaa46611 100644
--- a/src/main/java/net/minecraft/world/level/block/MushroomBlock.java
+++ b/src/main/java/net/minecraft/world/level/block/MushroomBlock.java
@@ -40,7 +40,14 @@ public class MushroomBlock extends BushBlock implements BonemealableBlock {
     @Override
     public void randomTick(BlockState state, ServerLevel world, BlockPos pos, RandomSource random) {
         if (random.nextFloat() < (world.spigotConfig.mushroomModifier / (100.0f * 25))) { // Spigot - SPIGOT-7159: Better modifier resolution
-            int i = 5;
+            // Paper start - Increase vanilla mushroom spread
+            int mushroomSpreadLimit = world.paperConfig().environment.mushroom.spreadLimit.or(5);
+            if(world.paperConfig().environment.mushroom.disableLimit.or(false)) {
+                mushroomSpreadLimit = 9 * 9 * 3; // Paper - 9x9x3 Vanilla SHAPE sum
+            }
+            int i = mushroomSpreadLimit;
+            // Paper end
+
             boolean flag = true;
             Iterator iterator = BlockPos.betweenClosed(pos.offset(-4, -1, -4), pos.offset(4, 1, 4)).iterator();
 
diff --git a/src/main/java/org/bukkit/craftbukkit/CraftServer.java b/src/main/java/org/bukkit/craftbukkit/CraftServer.java
index 54f27d91f941235a99e341ed84531ad7f0840728..249d76acac9a91cd46f0b8a477511974a75d6f4a 100644
--- a/src/main/java/org/bukkit/craftbukkit/CraftServer.java
+++ b/src/main/java/org/bukkit/craftbukkit/CraftServer.java
@@ -1330,7 +1330,7 @@ public final class CraftServer implements Server {
 
         // Paper - move down
 
-        long j = BiomeManager.obfuscateSeed(creator.seed());
+        long j = BiomeManager.obfuscateSeed(worlddata.worldGenOptions().seed()); // Paper - use world seed
         List<CustomSpawner> list = ImmutableList.of(new PhantomSpawner(), new PatrolSpawner(), new CatSpawner(), new VillageSiege(), new WanderingTraderSpawner(worlddata));
         LevelStem worlddimension = iregistry.get(actualDimension);
 
