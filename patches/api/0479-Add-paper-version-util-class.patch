From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: masmc05 <masmc05@gmail.com>
Date: Fri, 16 Feb 2024 14:13:30 +0200
Subject: [PATCH] Add paper version util class


diff --git a/src/main/java/io/papermc/paper/util/ServerInfo.java b/src/main/java/io/papermc/paper/util/ServerInfo.java
new file mode 100644
index 0000000000000000000000000000000000000000..51730357be027e16cb7360a1580021b8c24733da
--- /dev/null
+++ b/src/main/java/io/papermc/paper/util/ServerInfo.java
@@ -0,0 +1,85 @@
+package io.papermc.paper.util;
+
+import net.kyori.adventure.key.Key;
+import net.kyori.adventure.util.Services;
+import org.jetbrains.annotations.ApiStatus;
+import org.jetbrains.annotations.NotNull;
+import java.util.function.Supplier;
+
+/**
+ * A utility class to get information about the server
+ */
+@ApiStatus.NonExtendable
+public interface ServerInfo {
+    /**
+     * Get the server info instance
+     * @return the server info instance
+     */
+    static @NotNull ServerInfo serverInfo() {
+        //<editor-fold defaultstate="collapsed" desc="Holder">
+        final class Holder {
+            private static final Supplier<ServerInfo> instance = Services.service(ServerInfo.class)::orElseThrow;
+        }
+        //</editor-fold>
+        return Holder.instance.get();
+    }
+
+    /**
+     * Get the version of the server
+     * @return the version of the server (e.g. "1.20.4", "1.20.2-pre2", "23w31a")
+     * @see #is(String)
+     * @see #versionName()
+     */
+    @NotNull String version();
+
+    /**
+     * Get the version name of the server
+     * @return the version name of the server (e.g. "1.20.4", "1.20.2 Pre-release 2", "23w31a")
+     * @see #version()
+     */
+    @NotNull String versionName();
+
+    /**
+     * Get the api version of the server
+     * @return the api version of the server (e.g. "1.20.4-R0.1-SNAPSHOT")
+     */
+    @NotNull String apiVersion();
+
+    /**
+     * Get the brand of the server
+     * @return the brand of the server (e.g. "Paper")
+     */
+    @NotNull String serverBrand();
+
+    /**
+     * Checks if the server runs exactly the specified version
+     * @param version the version to check (e.g. "1.20.4", "1.20.2-pre2", "23w31a")
+     * @return true if the server runs exactly the specified version
+     * @see #isAtLeast(String)
+     * @see #version()
+     */
+    boolean is(@NotNull String version);
+
+    /**
+     * Checks if the server runs a version which is after this version or the same
+     * <p>
+     * Note: This method returns false on unsupported version formats for future compatibility
+     * <p>
+     * Currently supported formats are:
+     * <ul>
+     *     <li>Release versions</li>
+     * </ul>
+     * @param version the version to check (e.g. "1.20.4")
+     * @return true if the server runs on this version or a newer version
+     * @see #is(String)
+     * @see #version()
+     */
+    boolean isAtLeast(@NotNull String version);
+
+    /**
+     * Checks if the server is implementing the specified API
+     * @param api the API to check (e.g. "papermc:folia")
+     * @return true if the server is implementing the specified API
+     */
+    boolean isImplementing(@NotNull Key api);
+}
