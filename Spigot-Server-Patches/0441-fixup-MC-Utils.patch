From 19719ef4b353bce7e5465b57af906eaf30e99e52 Mon Sep 17 00:00:00 2001
From: Spottedleaf <Spottedleaf@users.noreply.github.com>
Date: Fri, 14 Feb 2020 01:35:39 -0800
Subject: [PATCH] fixup! MC Utils


diff --git a/src/main/java/net/minecraft/server/MCUtil.java b/src/main/java/net/minecraft/server/MCUtil.java
index bcd5cc9f2..b9d584452 100644
--- a/src/main/java/net/minecraft/server/MCUtil.java
+++ b/src/main/java/net/minecraft/server/MCUtil.java
@@ -93,15 +93,13 @@ public final class MCUtil {
     }
 
     // assumes the sets have the same comparator, and if this comparator is null then assume T is Comparable
-    public static <T> void mergeSortedSets(final java.util.function.Consumer<T> consumer, final java.util.SortedSet<T>...sets) {
-        java.util.Comparator<? super T> comparator = sets[0].comparator();
-        if (comparator == null) {
-            comparator = (java.util.Comparator)java.util.Comparator.naturalOrder();
-        }
+    public static <T> void mergeSortedSets(final java.util.function.Consumer<T> consumer, final java.util.Comparator<? super T> comparator, final java.util.SortedSet<T>...sets) {
         final it.unimi.dsi.fastutil.objects.ObjectRBTreeSet<T> all = new it.unimi.dsi.fastutil.objects.ObjectRBTreeSet<>(comparator);
         // note: this is done in log(n!) ~ nlogn time. It could be improved if it were to mimic what mergesort does.
         for (java.util.SortedSet<T> set : sets) {
-            all.addAll(all);
+            if (set != null) {
+                all.addAll(set);
+            }
         }
         all.forEach(consumer);
     }
-- 
2.25.1

