From 5521b9ed316a72f85178cbd4495c64b7504b04be Mon Sep 17 00:00:00 2001
From: MiniDigger <admin@minidigger.me>
Date: Thu, 16 Apr 2020 20:43:29 +0200
Subject: [PATCH] Add PlayerSendPacketEvent


diff --git a/src/main/java/com/destroystokyo/paper/event/player/PlayerSendPacketEvent.java b/src/main/java/com/destroystokyo/paper/event/player/PlayerSendPacketEvent.java
new file mode 100644
index 00000000..1f2a8734
--- /dev/null
+++ b/src/main/java/com/destroystokyo/paper/event/player/PlayerSendPacketEvent.java
@@ -0,0 +1,58 @@
+package com.destroystokyo.paper.event.player;
+
+import org.jetbrains.annotations.NotNull;
+
+import org.bukkit.entity.Player;
+import org.bukkit.event.Cancellable;
+import org.bukkit.event.HandlerList;
+import org.bukkit.event.player.PlayerEvent;
+
+/**
+ * Called when the player send a packet while in protocol phase play.<br>
+ * If cancelled, the server ignores the packet.<br>
+ * This event is always called on the main thread, right before the packet gets processed.<br>
+ * Its only called for packets that get processed on the main thread.
+ */
+public class PlayerSendPacketEvent extends PlayerEvent implements Cancellable {
+
+    private int id;
+    private Object packet;
+    private boolean cancelled;
+
+    public PlayerSendPacketEvent(@NotNull Player who, int id, @NotNull Object packet) {
+        super(who);
+        this.id = id;
+        this.packet = packet;
+    }
+
+    public int getId() {
+        return id;
+    }
+
+    @NotNull
+    public Object getPacket() {
+        return packet;
+    }
+
+    @Override
+    public boolean isCancelled() {
+        return cancelled;
+    }
+
+    @Override
+    public void setCancelled(boolean cancelled) {
+        this.cancelled = cancelled;
+    }
+
+    private static final HandlerList handlers = new HandlerList();
+
+    @NotNull
+    public HandlerList getHandlers() {
+        return handlers;
+    }
+
+    @NotNull
+    public static HandlerList getHandlerList() {
+        return handlers;
+    }
+}
-- 
2.17.1

