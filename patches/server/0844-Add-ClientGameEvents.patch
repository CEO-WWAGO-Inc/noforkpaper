From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: thamid-gamer <60953955+thamid-gamer@users.noreply.github.com>
Date: Sat, 1 Jan 2022 13:07:26 -0500
Subject: [PATCH] Add ClientGameEvents


diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
index 8de4ad9f2120d22b78202981624abd1d2fc70148..9239c59e3bfc06246fa334f1f7edc06ffd7db8b2 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
@@ -2274,6 +2274,55 @@ public class CraftPlayer extends CraftHumanEntity implements Player {
         this.getHandle().connection.send(new ClientboundGameEventPacket(ClientboundGameEventPacket.DEMO_EVENT, ClientboundGameEventPacket.DEMO_PARAM_INTRO));
     }
 
+    // Paper start
+    public void sendClientGameEvent(@NotNull io.papermc.paper.ClientGameEvent event, float value) {
+        if (this.getHandle().connection == null) return;
+
+        ClientboundGameEventPacket.Type type;
+        if (io.papermc.paper.ClientGameEvent.NO_RESPAWN_BLOCK_AVAILABLE.equals(event)) {
+            type = ClientboundGameEventPacket.NO_RESPAWN_BLOCK_AVAILABLE;
+        }
+        else if (io.papermc.paper.ClientGameEvent.START_RAINING.equals(event)) {
+            type = ClientboundGameEventPacket.START_RAINING;
+        }
+        else if (io.papermc.paper.ClientGameEvent.STOP_RAINING.equals(event)) {
+            type = ClientboundGameEventPacket.STOP_RAINING;
+        }
+        else if (io.papermc.paper.ClientGameEvent.CHANGE_GAME_MODE.equals(event)) {
+            type = ClientboundGameEventPacket.CHANGE_GAME_MODE;
+        }
+        else if (io.papermc.paper.ClientGameEvent.WIN_GAME.equals(event)) {
+            type = ClientboundGameEventPacket.WIN_GAME;
+        }
+        else if (io.papermc.paper.ClientGameEvent.DEMO_EVENT.equals(event)) {
+            type = ClientboundGameEventPacket.DEMO_EVENT;
+        }
+        else if (io.papermc.paper.ClientGameEvent.ARROW_HIT_PLAYER.equals(event)) {
+            type = ClientboundGameEventPacket.ARROW_HIT_PLAYER;
+        }
+        else if (io.papermc.paper.ClientGameEvent.RAIN_LEVEL_CHANGE.equals(event)) {
+            type = ClientboundGameEventPacket.RAIN_LEVEL_CHANGE;
+        }
+        else if (io.papermc.paper.ClientGameEvent.THUNDER_LEVEL_CHANGE.equals(event)) {
+            type = ClientboundGameEventPacket.THUNDER_LEVEL_CHANGE;
+        }
+        else if (io.papermc.paper.ClientGameEvent.PUFFER_FISH_STING.equals(event)) {
+            type = ClientboundGameEventPacket.PUFFER_FISH_STING;
+        }
+        else if (io.papermc.paper.ClientGameEvent.GUARDIAN_ELDER_EFFECT.equals(event)) {
+            type = ClientboundGameEventPacket.GUARDIAN_ELDER_EFFECT;
+        }
+        else if (io.papermc.paper.ClientGameEvent.IMMEDIATE_RESPAWN.equals(event)) {
+            type = ClientboundGameEventPacket.IMMEDIATE_RESPAWN;
+        }
+        else {
+            throw new IllegalArgumentException("Unknown ClientGameEvent");
+        }
+
+        this.getHandle().connection.send(new ClientboundGameEventPacket(type, value));
+    }
+    // Paper end
+
     @Override
     public boolean isAllowingServerListings() {
         return this.getHandle().allowsListing();
