From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: sulu5890 <sulu@sulu.me>
Date: Sun, 11 Jul 2021 19:34:03 -0500
Subject: [PATCH] Fix incorrect message for outdated client


diff --git a/src/main/java/net/minecraft/server/network/ServerHandshakePacketListenerImpl.java b/src/main/java/net/minecraft/server/network/ServerHandshakePacketListenerImpl.java
index fb9756da8b9692dc739bcbb248b170c3e3906bf4..9e62a9754ef9a1fdb5d39f462ad2f7c44d1b4652 100644
--- a/src/main/java/net/minecraft/server/network/ServerHandshakePacketListenerImpl.java
+++ b/src/main/java/net/minecraft/server/network/ServerHandshakePacketListenerImpl.java
@@ -81,7 +81,7 @@ public class ServerHandshakePacketListenerImpl implements ServerHandshakePacketL
                 if (packet.getProtocolVersion() != SharedConstants.getCurrentVersion().getProtocolVersion()) {
                     Component chatmessage; // Paper - Adventure
 
-                    if (packet.getProtocolVersion() < 754) {
+                    if (packet.getProtocolVersion() < SharedConstants.getCurrentVersion().getProtocolVersion()) { // Paper - Fix incorrect message for outdated clients
                         chatmessage = new io.papermc.paper.adventure.AdventureComponent(org.spigotmc.SpigotConfig.outdatedClientMessage); // Spigot // Paper - Adventure
                     } else {
                         chatmessage = new io.papermc.paper.adventure.AdventureComponent(org.spigotmc.SpigotConfig.outdatedServerMessage); // Spigot // Paper - Adventure
