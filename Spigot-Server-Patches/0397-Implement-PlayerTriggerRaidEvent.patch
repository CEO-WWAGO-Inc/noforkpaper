From 7e476463b967a71f27636b2b91ab2b8cccf39b5b Mon Sep 17 00:00:00 2001
From: simpleauthority <jacob@algorithmjunkie.com>
Date: Tue, 28 May 2019 02:30:16 -0700
Subject: [PATCH] Implement PlayerTriggerRaidEvent


diff --git a/src/main/java/net/minecraft/server/PersistentRaid.java b/src/main/java/net/minecraft/server/PersistentRaid.java
index 6a8469d7..444703fd 100644
--- a/src/main/java/net/minecraft/server/PersistentRaid.java
+++ b/src/main/java/net/minecraft/server/PersistentRaid.java
@@ -73,6 +73,13 @@ public class PersistentRaid extends PersistentBase {
                 Raid raid = this.a(entityplayer.getWorldServer(), (BlockPosition) optional.get());
                 boolean flag = false;
 
+                // Paper start
+                if (!new com.destroystokyo.paper.event.player.PlayerTriggerRaidEvent(entityplayer.getBukkitEntity()).callEvent()) {
+                    entityplayer.removeEffect(MobEffects.BAD_OMEN);
+                    return null;
+                }
+                // Paper end
+
                 if (!raid.j()) {
                     if (!this.a.containsKey(raid.t())) {
                         this.a.put(raid.t(), raid);
-- 
2.19.2

