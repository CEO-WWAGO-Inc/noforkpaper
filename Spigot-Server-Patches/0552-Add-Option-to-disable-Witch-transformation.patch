From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: TheShermanTanker <tanksherman27@gmail.com>
Date: Wed, 12 Aug 2020 01:25:57 +0800
Subject: [PATCH] Add-Option-to-disable-Witch-transformation


diff --git a/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java b/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java
index e471e764935e2a89560de56959a782b02e5e8fe1..b144587111766c109500bf2cb31feba60ebb856e 100644
--- a/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java
+++ b/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java
@@ -72,6 +72,11 @@ public class PaperWorldConfig {
         return config.getString("world-settings." + worldName + "." + path, config.getString("world-settings.default." + path));
     }
 
+    public boolean witchConversion;
+    private void advancedSurvivalSettings() { //More settings planned to be added
+    	witchConversion = getBoolean("advanced-survival-settings.witch-conversions", false);
+    }
+
     public int cactusMaxHeight;
     public int reedMaxHeight;
     private void blockGrowthHeight() {
diff --git a/src/main/java/net/minecraft/server/EntityVillager.java b/src/main/java/net/minecraft/server/EntityVillager.java
index bf019043a9338aca8d91da809f1d5520531386e7..d0e2360db2e809c0d216eea603a5ebc4600808f4 100644
--- a/src/main/java/net/minecraft/server/EntityVillager.java
+++ b/src/main/java/net/minecraft/server/EntityVillager.java
@@ -722,6 +722,10 @@ public class EntityVillager extends EntityVillagerAbstract implements Reputation
 
     @Override
     public void onLightningStrike(EntityLightning entitylightning) {
+    	if(!this.world.paperConfig.witchConversion) { //Paper - Add Option to disable Witch Conversion
+    		super.onLightningStrike(entitylightning);
+    		return;
+    	}
         if (this.world.getDifficulty() != EnumDifficulty.PEACEFUL) {
             EntityVillager.LOGGER.info("Villager {} was struck by lightning {}.", this, entitylightning);
             EntityWitch entitywitch = (EntityWitch) EntityTypes.WITCH.a(this.world);
