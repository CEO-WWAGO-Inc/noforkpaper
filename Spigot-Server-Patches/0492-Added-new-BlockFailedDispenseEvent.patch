From 9403d0fc108fd3be4a60ff24e7ed16a0e057e5b6 Mon Sep 17 00:00:00 2001
From: TheViperShow <29604693+TheViperShow@users.noreply.github.com>
Date: Tue, 21 Apr 2020 23:00:58 +0200
Subject: [PATCH] Added new BlockFailedDispenseEvent


diff --git a/src/main/java/net/minecraft/server/IDispenseBehavior.java b/src/main/java/net/minecraft/server/IDispenseBehavior.java
index 3af686c7..e6d6e00f 100644
--- a/src/main/java/net/minecraft/server/IDispenseBehavior.java
+++ b/src/main/java/net/minecraft/server/IDispenseBehavior.java
@@ -1,5 +1,6 @@
 package net.minecraft.server;
 
+import com.destroystokyo.paper.event.block.BlockFailedDispenseEvent;
 import java.util.Iterator;
 import java.util.List;
 import java.util.Random;
@@ -16,6 +17,11 @@ import org.bukkit.event.world.StructureGrowEvent;
 public interface IDispenseBehavior {
 
     IDispenseBehavior NONE = (isourceblock, itemstack) -> {
+        // Paper start - register empty item
+        World world = isourceblock.getWorld();
+        org.bukkit.block.Block bukkitBlock = world.getWorld().getBlockAt(isourceblock.getBlockPosition().getX(), isourceblock.getBlockPosition().getY(), isourceblock.getBlockPosition().getZ());
+        BlockFailedDispenseEvent blockFailedDispenseEvent = new BlockFailedDispenseEvent(bukkitBlock);
+        // Paper end
         return itemstack;
     };
 
-- 
2.26.0.windows.1

