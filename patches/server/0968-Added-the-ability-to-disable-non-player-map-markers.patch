From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: poonkje112 <aaron.knoop@live.nl>
Date: Sun, 26 Mar 2023 04:17:53 +0200
Subject: [PATCH] Added the ability to disable non-player map markers


diff --git a/src/main/java/net/minecraft/world/level/saveddata/maps/MapItemSavedData.java b/src/main/java/net/minecraft/world/level/saveddata/maps/MapItemSavedData.java
index 50348a5eec1e2ffabfc8405d708461376a162913..27846b631b5ef2b3fee29e9d17963094e3ba0c5e 100644
--- a/src/main/java/net/minecraft/world/level/saveddata/maps/MapItemSavedData.java
+++ b/src/main/java/net/minecraft/world/level/saveddata/maps/MapItemSavedData.java
@@ -583,6 +583,8 @@ public class MapItemSavedData extends SavedData {
                 // If this cursor is for a player check visibility with vanish system
                 org.bukkit.entity.Player other = org.bukkit.Bukkit.getPlayerExact(name); // Spigot
                 if (other == null || player.canSee(other)) {
+                    if(!io.papermc.paper.configuration.GlobalConfiguration.get().misc.showMapMarkers && mapIcon.getType() != MapDecoration.Type.PLAYER) return; // Paper - Configurable map markers
+
                     icons.add(mapIcon);
                 }
             });
