From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: viktorhrekh <viktorhrekh@viesoft.dev>
Date: Sat, 25 Feb 2023 02:32:21 +0200
Subject: [PATCH] Log message if plugin bootstrap provided external plugin


diff --git a/src/main/java/io/papermc/paper/plugin/provider/type/paper/PaperPluginParent.java b/src/main/java/io/papermc/paper/plugin/provider/type/paper/PaperPluginParent.java
index a0773c6d24de1f2ce1f0d949cba26b9997b696e6..b0f9ab36bf29e2b7ea7c7f17449a943b320c3c04 100644
--- a/src/main/java/io/papermc/paper/plugin/provider/type/paper/PaperPluginParent.java
+++ b/src/main/java/io/papermc/paper/plugin/provider/type/paper/PaperPluginParent.java
@@ -172,9 +172,8 @@ public class PaperPluginParent {
                     plugin = bootstrap.createPlugin(PaperPluginParent.this.context);
                 }
 
-                // Don't allow plugins to load plugins other than the one defined in main. This restriction might not be necessary.
                 if (!plugin.getClass().isAssignableFrom(Class.forName(PaperPluginParent.this.description.getMainClass(), true, plugin.getClass().getClassLoader()))) {
-                    throw new IllegalArgumentException("Plugin provided must be the same type as main defined in plugin configuration!");
+                    logger.info("Bootstrap of plugin " + PaperPluginParent.this.description.getName() + " provided a plugin instance of class " + plugin.getClass().getName() + " which does not match the plugin declared main class");
                 }
 
                 this.status = ProviderStatus.INITIALIZED;
