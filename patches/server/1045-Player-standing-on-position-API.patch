From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Owen1212055 <23108066+Owen1212055@users.noreply.github.com>
Date: Fri, 9 Jun 2023 22:49:38 -0400
Subject: [PATCH] Player standing on position API

== AT ==
public net.minecraft.world.entity.Entity getBlockPosBelowThatAffectsMyMovement()Lnet/minecraft/core/BlockPos;

diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftEntity.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftEntity.java
index 8698104e3eb98e2cc5da5de87a8f538860c1d91d..210b26850e609a2063bd317b1ee0df1a7fe9ba93 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftEntity.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftEntity.java
@@ -1227,4 +1227,18 @@ public abstract class CraftEntity implements org.bukkit.entity.Entity {
         return this.getHandle().getScoreboardName();
     }
     // Paper end - entity scoreboard name
+    // Paper start - Player standing on position API
+    @Override
+    public org.bukkit.block.Block getMovementAffectingBlock() {
+        net.minecraft.core.BlockPos blockPos = this.getHandle().getBlockPosBelowThatAffectsMyMovement();
+        return new org.bukkit.craftbukkit.block.CraftBlock(this.getHandle().level(), new net.minecraft.core.BlockPos(blockPos.getX(), blockPos.getY(), blockPos.getZ()));
+    }
+
+    @Override
+    public org.bukkit.block.Block getSupportingBlock() {
+        return this.getHandle().mainSupportingBlockPos
+            .map((pos) -> new org.bukkit.craftbukkit.block.CraftBlock(this.getHandle().level(), new net.minecraft.core.BlockPos(pos.getX(), pos.getY(), pos.getZ())))
+            .orElse(null);
+    }
+    // Paper end - Player standing on position API
 }
