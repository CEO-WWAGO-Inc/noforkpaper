From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?L=C3=A9o=20Moriceau?= <thisis41@protonmail.com>
Date: Wed, 9 Aug 2023 22:04:15 +0200
Subject: [PATCH] Increase vanilla mushroom spread limit


diff --git a/src/main/java/net/minecraft/world/level/block/MushroomBlock.java b/src/main/java/net/minecraft/world/level/block/MushroomBlock.java
index 5238b23cd3bca21e2b14c9be15699b95ad267e24..1afa460b388e1a772b278ac6710adc211fd5f2be 100644
--- a/src/main/java/net/minecraft/world/level/block/MushroomBlock.java
+++ b/src/main/java/net/minecraft/world/level/block/MushroomBlock.java
@@ -40,10 +40,17 @@ public class MushroomBlock extends BushBlock implements BonemealableBlock {
     @Override
     public void randomTick(BlockState state, ServerLevel world, BlockPos pos, RandomSource random) {
         if (random.nextFloat() < (world.spigotConfig.mushroomModifier / (100.0f * 25))) { // Spigot - SPIGOT-7159: Better modifier resolution
-            int i = 5;
             boolean flag = true;
             Iterator iterator = BlockPos.betweenClosed(pos.offset(-4, -1, -4), pos.offset(4, 1, 4)).iterator();
 
+            // Paper start - Increase vanilla mushroom spread
+            int mushroomSpreadLimit = world.paperConfig().environment.mushroom.spreadLimit;
+            if(mushroomSpreadLimit == -1) {
+                mushroomSpreadLimit = 9 * 9 * 3; // Paper - 9x9x3 Vanilla SHAPE sum
+            }
+            int i = mushroomSpreadLimit;
+            // Paper end
+
             while (iterator.hasNext()) {
                 BlockPos blockposition1 = (BlockPos) iterator.next();
 
