From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Owen1212055 <23108066+Owen1212055@users.noreply.github.com>
Date: Fri, 9 Jun 2023 22:49:38 -0400
Subject: [PATCH] Player standing on position API

== AT ==
public net.minecraft.world.entity.Entity getBlockPosBelowThatAffectsMyMovement()Lnet/minecraft/core/BlockPos;

diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftEntity.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftEntity.java
index 8698104e3eb98e2cc5da5de87a8f538860c1d91d..9f5d36507b6a1d7ff425171b5e4516823885bd46 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftEntity.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftEntity.java
@@ -1227,4 +1227,24 @@ public abstract class CraftEntity implements org.bukkit.entity.Entity {
         return this.getHandle().getScoreboardName();
     }
     // Paper end - entity scoreboard name
+    // Paper start - Player standing on position API
+    @Override
+    public Location getMovementAffectingBlock() {
+        net.minecraft.core.BlockPos blockPos = this.getHandle().getBlockPosBelowThatAffectsMyMovement();
+        return new Location(this.getHandle().level().getWorld(), blockPos.getX(), blockPos.getY(), blockPos.getZ());
+    }
+
+    @Override
+    public Location getStandingPosition() {
+        net.minecraft.core.BlockPos blockPos = this.getHandle().getOnPos();
+        return new Location(this.getHandle().level().getWorld(), blockPos.getX(), blockPos.getY(), blockPos.getZ());
+    }
+
+    @Override
+    public Location getSupportingBlock() {
+        return this.getHandle().mainSupportingBlockPos
+            .map((func) -> new Location(this.getHandle().level().getWorld(), func.getX(), func.getY(), func.getZ()))
+            .orElse(null);
+    }
+    // Paper end - Player standing on position API
 }
