From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?L=C3=A9o=20Moriceau?= <thisis41@protonmail.com>
Date: Sun, 13 Aug 2023 13:18:57 +0200
Subject: [PATCH] Increase vanilla Mushroom spread limit


diff --git a/src/main/java/net/minecraft/world/level/block/MushroomBlock.java b/src/main/java/net/minecraft/world/level/block/MushroomBlock.java
index 5238b23cd3bca21e2b14c9be15699b95ad267e24..746d8001ada3db7417a426e0b70df486bfbb9477 100644
--- a/src/main/java/net/minecraft/world/level/block/MushroomBlock.java
+++ b/src/main/java/net/minecraft/world/level/block/MushroomBlock.java
@@ -41,6 +41,14 @@ public class MushroomBlock extends BushBlock implements BonemealableBlock {
     public void randomTick(BlockState state, ServerLevel world, BlockPos pos, RandomSource random) {
         if (random.nextFloat() < (world.spigotConfig.mushroomModifier / (100.0f * 25))) { // Spigot - SPIGOT-7159: Better modifier resolution
             int i = 5;
+            // Paper start - Increase vanilla mushroom spread
+            int mushroomSpreadLimit = world.paperConfig().environment.mushroom.spreadLimit.or(i);
+            if(world.paperConfig().environment.mushroom.disableLimit.or(false)) {
+                mushroomSpreadLimit = 9 * 9 * 3; // Paper - 9x9x3 Vanilla SHAPE sum
+            }
+            i = mushroomSpreadLimit;
+            // Paper end
+
             boolean flag = true;
             Iterator iterator = BlockPos.betweenClosed(pos.offset(-4, -1, -4), pos.offset(4, 1, 4)).iterator();
 
