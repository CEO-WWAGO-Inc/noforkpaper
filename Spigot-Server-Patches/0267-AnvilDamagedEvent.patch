From b0254a31544539c22701fd85274d63d755192ff6 Mon Sep 17 00:00:00 2001
From: BillyGalbreath <Blake.Galbreath@GMail.com>
Date: Sun, 21 Jan 2018 05:09:49 -0600
Subject: [PATCH] AnvilDamagedEvent


diff --git a/src/main/java/net/minecraft/server/ContainerAnvil.java b/src/main/java/net/minecraft/server/ContainerAnvil.java
index 16ec67569..22abf22a0 100644
--- a/src/main/java/net/minecraft/server/ContainerAnvil.java
+++ b/src/main/java/net/minecraft/server/ContainerAnvil.java
@@ -74,6 +74,13 @@ public class ContainerAnvil extends Container {
                     int i = ((Integer) iblockdata.get(BlockAnvil.DAMAGE)).intValue();
 
                     ++i;
+                    // Paper start - AnvilDamagedEvent
+                    com.destroystokyo.paper.event.block.AnvilDamagedEvent anvilDamagedEvent = new com.destroystokyo.paper.event.block.AnvilDamagedEvent(getBukkitView(), i);
+                    if (!anvilDamagedEvent.callEvent()) {
+                        return itemstack;
+                    }
+                    i = anvilDamagedEvent.getDamage();
+                    // Paper end - AnvilDamagedEvent
                     if (i > 2) {
                         world.setAir(blockposition);
                         world.triggerEffect(1029, blockposition, 0);
-- 
2.11.0

