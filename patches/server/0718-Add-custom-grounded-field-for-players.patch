From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Owen1212055 <23108066+Owen1212055@users.noreply.github.com>
Date: Mon, 21 Jun 2021 22:29:15 -0400
Subject: [PATCH] Add custom grounded field for players


diff --git a/src/main/java/net/minecraft/world/entity/player/Player.java b/src/main/java/net/minecraft/world/entity/player/Player.java
index 1bccd932851045c374e3092d33dc77fab680d0db..69ac60c5506e91867b50e7730eda4a5fd4a8a421 100644
--- a/src/main/java/net/minecraft/world/entity/player/Player.java
+++ b/src/main/java/net/minecraft/world/entity/player/Player.java
@@ -182,6 +182,7 @@ public abstract class Player extends LivingEntity {
     // Paper start
     public boolean affectsSpawning = true;
     // Paper end
+    public boolean playerGrounded = false; // Paper - Custom grounded field
 
     // CraftBukkit start
     public boolean fauxSleeping;
@@ -313,6 +314,7 @@ public abstract class Player extends LivingEntity {
         this.turtleHelmetTick();
         this.cooldowns.tick();
         this.updatePlayerPose();
+        this.playerGrounded = onGround; // Paper
     }
 
     public boolean isSecondaryUseActive() {
diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
index 76e2ae09855e0efaaa0856d2f49e4968adbccbdc..9d53de530f577501d32225eba8df167b1775fc0a 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
@@ -590,6 +590,12 @@ public class CraftPlayer extends CraftHumanEntity implements Player {
     public boolean performCommand(String command) {
         return server.dispatchCommand(this, command);
     }
+    // Paper start
+    @Override
+    public boolean isGrounded() {
+        return getHandle().playerGrounded;
+    }
+    // Paper end
 
     @Override
     public void playNote(Location loc, byte instrument, byte note) {
