From 3997d87d805ed20e06621e10f3410215caddbc11 Mon Sep 17 00:00:00 2001
From: Sweepyoface <github@sweepy.pw>
Date: Wed, 14 Jun 2017 04:09:27 +0000
Subject: [PATCH] Add PlayerUnknownCommandEvent


diff --git a/src/main/java/org/bukkit/craftbukkit/CraftServer.java b/src/main/java/org/bukkit/craftbukkit/CraftServer.java
index df6a75b..5f0a13c 100644
--- a/src/main/java/org/bukkit/craftbukkit/CraftServer.java
+++ b/src/main/java/org/bukkit/craftbukkit/CraftServer.java
@@ -131,6 +131,7 @@ import org.apache.commons.lang.StringUtils;
 import org.bukkit.NamespacedKey;
 import org.bukkit.craftbukkit.util.CraftNamespacedKey;
 import org.bukkit.event.server.TabCompleteEvent;
+import org.bukkit.event.player.PlayerUnknownCommandEvent;
 import net.md_5.bungee.api.chat.BaseComponent;
 
 public final class CraftServer implements Server {
@@ -671,7 +672,15 @@ public final class CraftServer implements Server {
 
         // Spigot start
         if (StringUtils.isNotEmpty(org.spigotmc.SpigotConfig.unknownCommandMessage)) {
-            sender.sendMessage(org.spigotmc.SpigotConfig.unknownCommandMessage);
+            // Paper start
+            if (!(sender instanceof ConsoleCommandSender)) {
+                PlayerUnknownCommandEvent event = new PlayerUnknownCommandEvent(sender, commandLine, org.spigotmc.SpigotConfig.unknownCommandMessage);
+                Bukkit.getServer().getPluginManager().callEvent(event);
+                sender.sendMessage(event.getMessage());
+            } else {
+                sender.sendMessage(org.spigotmc.SpigotConfig.unknownCommandMessage);
+            }
+            // Paper end
         }
         // Spigot end
 
-- 
2.7.4

