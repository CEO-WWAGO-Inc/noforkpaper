From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Noah van der Aa <ndvdaa@gmail.com>
Date: Thu, 5 Aug 2021 16:08:23 +0200
Subject: [PATCH] Add environment variable to set velocity secret.


diff --git a/src/main/java/com/destroystokyo/paper/PaperConfig.java b/src/main/java/com/destroystokyo/paper/PaperConfig.java
index 95d8cf449bf0439fddaf319246fef51e1570b68e..8e497a05e3d430cd2047788b032bca6fcb6c7bda 100644
--- a/src/main/java/com/destroystokyo/paper/PaperConfig.java
+++ b/src/main/java/com/destroystokyo/paper/PaperConfig.java
@@ -356,7 +356,7 @@ public class PaperConfig {
     private static void velocitySupport() {
         velocitySupport = getBoolean("settings.velocity-support.enabled", false);
         velocityOnlineMode = getBoolean("settings.velocity-support.online-mode", false);
-        String secret = getString("settings.velocity-support.secret", "");
+        String secret = java.util.Objects.requireNonNullElse(System.getenv("VELOCITY_SECRET"), getString("settings.velocity-support.secret", ""));
         if (velocitySupport && secret.isEmpty()) {
             fatal("Velocity support is enabled, but no secret key was specified. A secret key is required!");
         } else {
