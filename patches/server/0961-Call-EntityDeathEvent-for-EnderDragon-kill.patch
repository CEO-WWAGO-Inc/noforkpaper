From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Alfie-Joe Smith <alfie@alfiesmith.net>
Date: Fri, 10 Feb 2023 06:30:11 +0000
Subject: [PATCH] Call EntityDeathEvent for EnderDragon#kill


diff --git a/src/main/java/net/minecraft/world/entity/boss/enderdragon/EnderDragon.java b/src/main/java/net/minecraft/world/entity/boss/enderdragon/EnderDragon.java
index c7caaebfb4b9f28cbe700d88fdcf232a500e8ca7..3c3a99a87094515b37a441ce3d9a3b6ef9fe3e57 100644
--- a/src/main/java/net/minecraft/world/entity/boss/enderdragon/EnderDragon.java
+++ b/src/main/java/net/minecraft/world/entity/boss/enderdragon/EnderDragon.java
@@ -616,6 +616,13 @@ public class EnderDragon extends Mob implements Enemy {
 
     @Override
     public void kill() {
+        // Paper start
+        org.bukkit.event.entity.EntityDeathEvent event = org.bukkit.craftbukkit.event.CraftEventFactory.callEntityDeathEvent(this, drops);  // Paper - call event
+        if(event.isCancelled()) {
+            return;
+        }
+        // Paper end
+
         this.remove(Entity.RemovalReason.KILLED);
         this.gameEvent(GameEvent.ENTITY_DIE);
         if (this.dragonFight != null) {
