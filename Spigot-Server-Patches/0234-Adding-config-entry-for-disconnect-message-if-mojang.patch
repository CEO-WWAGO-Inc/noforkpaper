From ca54df2531d64957a606a8e31804b68d632bb0c1 Mon Sep 17 00:00:00 2001
From: phenomax <phenomax@revayd.net>
Date: Thu, 17 Aug 2017 16:38:21 +0200
Subject: [PATCH] Adding config entry for disconnect message, if mojang servers
 are unavailable


diff --git a/src/main/java/com/destroystokyo/paper/PaperConfig.java b/src/main/java/com/destroystokyo/paper/PaperConfig.java
index f4b23703..ee862ba6 100644
--- a/src/main/java/com/destroystokyo/paper/PaperConfig.java
+++ b/src/main/java/com/destroystokyo/paper/PaperConfig.java
@@ -270,4 +270,9 @@ public class PaperConfig {
     private static void suggestPlayersWhenNull() {
         suggestPlayersWhenNullTabCompletions = getBoolean("settings.suggest-player-names-when-null-tab-completions", suggestPlayersWhenNullTabCompletions);
     }
+
+    public static String authenticationServersDownMessage = "Authentication servers are down. Please try again later!";
+    private static void authenticationServersDownMessage() {
+        authenticationServersDownMessage = getString("messages.kick.authentication-servers-down", authenticationServersDownMessage);
+    }
 }
diff --git a/src/main/java/net/minecraft/server/LoginListener.java b/src/main/java/net/minecraft/server/LoginListener.java
index c5434e6b..f5836279 100644
--- a/src/main/java/net/minecraft/server/LoginListener.java
+++ b/src/main/java/net/minecraft/server/LoginListener.java
@@ -250,7 +250,7 @@ public class LoginListener implements PacketLoginInListener, ITickable {
                             LoginListener.this.i = LoginListener.this.a(gameprofile);
                             LoginListener.this.g = LoginListener.EnumProtocolState.READY_TO_ACCEPT;
                         } else {
-                            LoginListener.this.disconnect(new ChatMessage("multiplayer.disconnect.authservers_down", new Object[0]));
+                            LoginListener.this.disconnect(new ChatMessage(com.destroystokyo.paper.PaperConfig.authenticationServersDownMessage, new Object[0])); // Paper - use custom message, if Mojang is down
                             LoginListener.c.error("Couldn\'t verify username because servers are unavailable");
                         }
                         // CraftBukkit start - catch all exceptions
-- 
2.14.0.windows.1

