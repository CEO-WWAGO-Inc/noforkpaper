From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: DungeonDev <dungeondevtn@gmail.com>
Date: Sun, 2 Jul 2023 02:34:54 +0100
Subject: [PATCH] Fix tripwire state inconsistency

Fixes MC-129055 and thereby infinite string duplication when breaking bugged string

diff --git a/src/main/java/net/minecraft/world/level/block/TripWireHookBlock.java b/src/main/java/net/minecraft/world/level/block/TripWireHookBlock.java
index 4a516828e5c6abd63511ee7c93fcff11203cf8d0..162174b386814eba4198cdc45070517626181853 100644
--- a/src/main/java/net/minecraft/world/level/block/TripWireHookBlock.java
+++ b/src/main/java/net/minecraft/world/level/block/TripWireHookBlock.java
@@ -188,8 +188,8 @@ public class TripWireHookBlock extends Block {
                 BlockState iblockdata4 = aiblockdata[l];
 
                 if (iblockdata4 != null) {
+                    if (io.papermc.paper.configuration.GlobalConfiguration.get().unsupportedSettings.allowShearsDisarmedTripwire || world.getBlockState(blockposition2).is(Blocks.TRIPWIRE)) { // Paper - Moved up, validate correct block instead of non-air.
                     world.setBlock(blockposition2, (BlockState) iblockdata4.setValue(TripWireHookBlock.ATTACHED, flag4), 3);
-                    if (!world.getBlockState(blockposition2).isAir()) {
                         ;
                     }
                 }
