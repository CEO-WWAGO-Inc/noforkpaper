From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Owen1212055 <23108066+Owen1212055@users.noreply.github.com>
Date: Thu, 16 Jun 2022 11:05:19 -0400
Subject: [PATCH] Add Disable Vibrations Config


diff --git a/src/main/java/net/minecraft/server/level/ServerLevel.java b/src/main/java/net/minecraft/server/level/ServerLevel.java
index 0dc7a827aeacc7fae53b1f975f45883da7db6a0c..79e932cb959b029f9a06bb09def82be6c3e414f2 100644
--- a/src/main/java/net/minecraft/server/level/ServerLevel.java
+++ b/src/main/java/net/minecraft/server/level/ServerLevel.java
@@ -1564,6 +1564,7 @@ public class ServerLevel extends Level implements WorldGenLevel {
 
     @Override
     public void gameEvent(GameEvent event, Vec3 emitterPos, GameEvent.Context emitter) {
+        if (this.paperConfig().entities.behavior.disableVibrations) return;
         int i = event.getNotificationRadius();
         BlockPos blockposition = new BlockPos(emitterPos);
         // CraftBukkit start
diff --git a/src/main/java/net/minecraft/world/level/chunk/LevelChunk.java b/src/main/java/net/minecraft/world/level/chunk/LevelChunk.java
index c46cbbf9ac4c5661933b03bc0b2559f7ade8c798..604a8d58f97ba9a8bbb027bcb8e6d777b187028c 100644
--- a/src/main/java/net/minecraft/world/level/chunk/LevelChunk.java
+++ b/src/main/java/net/minecraft/world/level/chunk/LevelChunk.java
@@ -437,7 +437,7 @@ public class LevelChunk extends ChunkAccess {
     public GameEventDispatcher getEventDispatcher(int ySectionCoord) {
         Level world = this.level;
 
-        if (world instanceof ServerLevel) {
+        if (world instanceof ServerLevel && !this.level.paperConfig().entities.behavior.disableVibrations) { // Paper
             ServerLevel worldserver = (ServerLevel) world;
 
             return (GameEventDispatcher) this.gameEventDispatcherSections.computeIfAbsent(ySectionCoord, (j) -> {
