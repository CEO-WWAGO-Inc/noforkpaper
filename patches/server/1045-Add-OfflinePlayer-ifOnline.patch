From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: leguan <longboard.noah@gmail.com>
Date: Sun, 28 Jan 2024 19:39:01 +0100
Subject: [PATCH] Add OfflinePlayer#ifOnline


diff --git a/src/main/java/org/bukkit/craftbukkit/CraftOfflinePlayer.java b/src/main/java/org/bukkit/craftbukkit/CraftOfflinePlayer.java
index 4a875bce9563f3b9351ebecde9b0eb1287beb50e..a5ce3a727271b6808fefa4c61989c6e949ecdd5f 100644
--- a/src/main/java/org/bukkit/craftbukkit/CraftOfflinePlayer.java
+++ b/src/main/java/org/bukkit/craftbukkit/CraftOfflinePlayer.java
@@ -358,6 +358,15 @@ public class CraftOfflinePlayer implements OfflinePlayer, ConfigurationSerializa
         return null;
     }
 
+    // Paper start - Add OfflinePlayer#ifOnline
+    @Override
+    public void ifOnline(final java.util.function.@org.jetbrains.annotations.NotNull Consumer<Player> consumer) {
+        if (this.isOnline()) {
+            consumer.accept(this.getPlayer());
+        }
+    }
+    // Paper end - Add OfflinePlayer#ifOnline
+
     @Override
     public Location getBedSpawnLocation() {
         return this.getRespawnLocation();
diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
index 39b25c2478eadd373383a3445a7f27ea30d18550..79e6e82fa0c56189f578ba7fd320e056bde481e3 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
@@ -1576,6 +1576,15 @@ public class CraftPlayer extends CraftHumanEntity implements Player {
         CraftStatistic.setStatistic(this.getHandle().getStats(), statistic, entityType, newValue, this.getHandle());
     }
 
+    // Paper start - Add OfflinePlayer#ifOnline
+    @Override
+    public void ifOnline(final java.util.function.@org.jetbrains.annotations.NotNull Consumer<Player> consumer) {
+        if (this.isOnline()) {
+            consumer.accept(this.getPlayer());
+        }
+    }
+    // Paper end - Add OfflinePlayer#ifOnline
+
     @Override
     public void setPlayerTime(long time, boolean relative) {
         this.getHandle().timeOffset = time;
