From 86b96f6da99844cbceb6a0cbacd24d72b16a95e9 Mon Sep 17 00:00:00 2001
From: AlphaBlend <whizkid3000@hotmail.com>
Date: Tue, 21 Feb 2017 16:51:10 -0800
Subject: [PATCH] Add PlayerArmorStandCreateEvent


diff --git a/src/main/java/net/minecraft/server/ItemArmorStand.java b/src/main/java/net/minecraft/server/ItemArmorStand.java
index b8fb68a..131eb8d 100644
--- a/src/main/java/net/minecraft/server/ItemArmorStand.java
+++ b/src/main/java/net/minecraft/server/ItemArmorStand.java
@@ -36,9 +36,21 @@ public class ItemArmorStand extends Item {
                         return EnumInteractionResult.FAIL;
                     } else {
                         if (!world.isClientSide) {
+                            // Paper start
+                            EntityArmorStand entityarmorstand = new EntityArmorStand(world, d0 + 0.5D, d1, d2 + 0.5D);
+
+                            com.destroystokyo.paper.event.player.PlayerArmorStandCreateEvent event = new com.destroystokyo.paper.event.player.PlayerArmorStandCreateEvent((org.bukkit.entity.Player) entityhuman.getBukkitEntity(), (org.bukkit.entity.ArmorStand) entityarmorstand.getBukkitEntity());
+                            world.getServer().getPluginManager().callEvent(event);
+
+                            if (event.isCancelled()) {
+                                return EnumInteractionResult.FAIL;
+                            }
+
                             world.setAir(blockposition1);
                             world.setAir(blockposition2);
-                            EntityArmorStand entityarmorstand = new EntityArmorStand(world, d0 + 0.5D, d1, d2 + 0.5D);
+
+                            //EntityArmorStand entityarmorstand = new EntityArmorStand(world, d0 + 0.5D, d1, d2 + 0.5D);
+                            // Paper end
                             float f3 = (float) MathHelper.d((MathHelper.g(entityhuman.yaw - 180.0F) + 22.5F) / 45.0F) * 45.0F;
 
                             entityarmorstand.setPositionRotation(d0 + 0.5D, d1, d2 + 0.5D, f3, 0.0F);
-- 
2.10.0.windows.1

