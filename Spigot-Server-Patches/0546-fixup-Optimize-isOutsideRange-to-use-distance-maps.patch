From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Spottedleaf <Spottedleaf@users.noreply.github.com>
Date: Tue, 21 Jul 2020 11:07:10 -0700
Subject: [PATCH] fixup! Optimize isOutsideRange to use distance maps


diff --git a/src/main/java/net/minecraft/server/ChunkProviderServer.java b/src/main/java/net/minecraft/server/ChunkProviderServer.java
index ef980f9859d1d7d0d5e13d0d70e998055f92135e..3a5a9aba111fed8b68818b95332b723ee2bce2ac 100644
--- a/src/main/java/net/minecraft/server/ChunkProviderServer.java
+++ b/src/main/java/net/minecraft/server/ChunkProviderServer.java
@@ -788,6 +788,7 @@ public class ChunkProviderServer extends IChunkProvider {
 
                 playerChunkMap.playerMobSpawnMap.addOrUpdate(player, chunkX, chunkZ, range);
                 player.lastEntitySpawnRadiusSquared = (double)((range << 4) * (range << 4)); // used in isOutsideRange
+                player.playerNaturallySpawnedEvent = event;
             }
             // Paper end - optimize isOutisdeRange
             this.world.getMethodProfiler().enter("pollingChunks");
