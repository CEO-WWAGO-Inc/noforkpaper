From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Jan Trummer <jan.trummer@hotmail.com>
Date: Mon, 3 Jan 2022 18:06:29 +0100
Subject: [PATCH] Added EntityClimbEvent


diff --git a/src/main/java/net/minecraft/world/entity/LivingEntity.java b/src/main/java/net/minecraft/world/entity/LivingEntity.java
index 43378561cf48f969f5bf1fd0db349415f4d1c866..f5c7ec2d6fa7b9b55128c7216eec5964ef513f74 100644
--- a/src/main/java/net/minecraft/world/entity/LivingEntity.java
+++ b/src/main/java/net/minecraft/world/entity/LivingEntity.java
@@ -19,6 +19,7 @@ import java.util.Random;
 import java.util.UUID;
 import java.util.function.Predicate;
 import javax.annotation.Nullable;
+
 import net.minecraft.BlockUtil;
 import net.minecraft.advancements.CriteriaTriggers;
 import net.minecraft.commands.arguments.EntityAnchorArgument;
@@ -43,6 +44,7 @@ import net.minecraft.network.syncher.EntityDataAccessor;
 import net.minecraft.network.syncher.EntityDataSerializers;
 import net.minecraft.network.syncher.SynchedEntityData;
 import net.minecraft.resources.ResourceLocation;
+import net.minecraft.server.MinecraftServer;
 import net.minecraft.server.level.ServerChunkCache;
 import net.minecraft.server.level.ServerLevel;
 import net.minecraft.server.level.ServerPlayer;
@@ -126,6 +128,7 @@ import java.util.Set;
 import com.google.common.base.Function;
 import org.bukkit.Location;
 import org.bukkit.craftbukkit.attribute.CraftAttributeMap;
+import org.bukkit.craftbukkit.block.CraftBlock;
 import org.bukkit.craftbukkit.event.CraftEventFactory;
 import org.bukkit.craftbukkit.inventory.CraftItemStack;
 import org.bukkit.entity.Player;
@@ -139,7 +142,6 @@ import org.bukkit.event.entity.EntityTeleportEvent;
 import org.bukkit.event.player.PlayerItemConsumeEvent;
 // CraftBukkit end
 
-import co.aikar.timings.MinecraftTimings; // Paper
 
 public abstract class LivingEntity extends Entity {
 
@@ -1849,6 +1851,12 @@ public abstract class LivingEntity extends Entity {
             BlockState iblockdata = this.getFeetBlockState();
 
             if (iblockdata.is((Tag) BlockTags.CLIMBABLE)) {
+                //Paper start
+                io.papermc.paper.event.entity. event = null;
+                CraftBlock craftBlock = CraftBlock.at(this.level, blockposition);
+                event = new io.papermc.paper.event.entity.EntityClimbEvent(this.getBukkitLivingEntity(), craftBlock);
+                event.callEvent();
+                //Paper end
                 this.lastClimbablePos = Optional.of(blockposition);
                 return true;
             } else if (iblockdata.getBlock() instanceof TrapDoorBlock && this.trapdoorUsableAsLadder(blockposition, iblockdata)) {
@@ -2838,7 +2846,6 @@ public abstract class LivingEntity extends Entity {
             if (d2 < 0.0D && !this.getFeetBlockState().is(Blocks.SCAFFOLDING) && this.isSuppressingSlidingDownLadder() && this instanceof net.minecraft.world.entity.player.Player) {
                 d2 = 0.0D;
             }
-
             motion = new Vec3(d0, d2, d1);
         }
 
