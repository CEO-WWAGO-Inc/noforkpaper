From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Noah van der Aa <ndvdaa@gmail.com>
Date: Thu, 5 Aug 2021 16:08:23 +0200
Subject: [PATCH] Add environment variable to set velocity secret.


diff --git a/src/main/java/com/destroystokyo/paper/PaperConfig.java b/src/main/java/com/destroystokyo/paper/PaperConfig.java
index 95d8cf449bf0439fddaf319246fef51e1570b68e..c1d8f93808c8e726aee0719d1f65011e950637bf 100644
--- a/src/main/java/com/destroystokyo/paper/PaperConfig.java
+++ b/src/main/java/com/destroystokyo/paper/PaperConfig.java
@@ -357,6 +357,8 @@ public class PaperConfig {
         velocitySupport = getBoolean("settings.velocity-support.enabled", false);
         velocityOnlineMode = getBoolean("settings.velocity-support.online-mode", false);
         String secret = getString("settings.velocity-support.secret", "");
+        String environmentSecret = System.getenv().getOrDefault("VELOCITY_SECRET", "");
+        secret = environmentSecret.isEmpty() ? secret : environmentSecret;
         if (velocitySupport && secret.isEmpty()) {
             fatal("Velocity support is enabled, but no secret key was specified. A secret key is required!");
         } else {
