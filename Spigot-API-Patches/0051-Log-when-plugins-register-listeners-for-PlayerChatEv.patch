From 46573fbb3cee6375a03d78d566de8636192158de Mon Sep 17 00:00:00 2001
From: Spottedleaf <Spottedleaf@users.noreply.github.com>
Date: Sun, 5 Feb 2017 19:11:36 -0800
Subject: [PATCH] Log when plugins register listeners for PlayerChatEvent


diff --git a/src/main/java/org/bukkit/plugin/SimplePluginManager.java b/src/main/java/org/bukkit/plugin/SimplePluginManager.java
index 9ce0a5d..209f689 100644
--- a/src/main/java/org/bukkit/plugin/SimplePluginManager.java
+++ b/src/main/java/org/bukkit/plugin/SimplePluginManager.java
@@ -577,6 +577,14 @@ public final class SimplePluginManager implements PluginManager {
             throw new IllegalPluginAccessException("Plugin attempted to register " + event + " while not enabled");
         }
 
+        // Paper start: tell dum ploogins they're dum
+        if (event == org.bukkit.event.player.PlayerChatEvent.class) {
+            plugin.getLogger().log(Level.SEVERE, "I have registered a listener which listens for " +
+                " PlayerChatEvent which was deprecated since Aug. 2012. Please tell the authors of this " +
+                "plugin to finally move into [current year].");
+        }
+        // Paper end
+
         executor = new co.aikar.timings.TimedEventExecutor(executor, plugin, null, event); // Spigot
         if (false) { // Spigot - RL handles useTimings check now
             getEventListeners(event).register(new TimedRegisteredListener(listener, executor, priority, plugin, ignoreCancelled));
diff --git a/src/main/java/org/bukkit/plugin/java/JavaPluginLoader.java b/src/main/java/org/bukkit/plugin/java/JavaPluginLoader.java
index 40fd71d..ee2f427 100644
--- a/src/main/java/org/bukkit/plugin/java/JavaPluginLoader.java
+++ b/src/main/java/org/bukkit/plugin/java/JavaPluginLoader.java
@@ -264,6 +264,14 @@ public final class JavaPluginLoader implements PluginLoader {
                 ret.put(eventClass, eventSet);
             }
 
+            // Paper start: tell dum ploogins they're dum
+            if (eventClass == org.bukkit.event.player.PlayerChatEvent.class) {
+                plugin.getLogger().log(Level.SEVERE, "I have registered a listener which listens for " +
+                    " PlayerChatEvent which was deprecated since Aug. 2012. Please tell the authors of this " +
+                    "plugin to finally move into [current year].");
+            }
+            // Paper end
+
             for (Class<?> clazz = eventClass; Event.class.isAssignableFrom(clazz); clazz = clazz.getSuperclass()) {
                 // This loop checks for extending deprecated events
                 if (clazz.getAnnotation(Deprecated.class) != null) {
-- 
2.7.4

