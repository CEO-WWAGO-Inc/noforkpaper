From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: darbyjack <admin@glaremasters.me>
Date: Wed, 22 Dec 2021 14:21:10 -0600
Subject: [PATCH] Library Loader Improvements


diff --git a/src/main/java/com/destroystokyo/paper/PaperConfig.java b/src/main/java/com/destroystokyo/paper/PaperConfig.java
index 6d02910a903f2c6352202c49149172e3eee3ed86..d76310be24361e888a9d0813b814a28bee98619d 100644
--- a/src/main/java/com/destroystokyo/paper/PaperConfig.java
+++ b/src/main/java/com/destroystokyo/paper/PaperConfig.java
@@ -260,6 +260,11 @@ public class PaperConfig {
                 " - Server Name: " + timingsServerName);
     }
 
+    public static List<String> repos = new java.util.ArrayList<>();
+    private static void loadRepos() {
+        repos = getList("settings.library-loader.repos", Lists.newArrayList("https://papermc.io/repo/repository/maven-public/"));
+    }
+
     public static boolean useDisplayNameInQuit = false;
     private static void useDisplayNameInQuit() {
         if (version < 21) {
diff --git a/src/main/java/org/bukkit/craftbukkit/util/CraftMagicNumbers.java b/src/main/java/org/bukkit/craftbukkit/util/CraftMagicNumbers.java
index 7978b4aa50f3abbcb9e07a0207c897b6be2a6129..e3d444bd8e0e1ff2ad712a57d618e3a292f4858d 100644
--- a/src/main/java/org/bukkit/craftbukkit/util/CraftMagicNumbers.java
+++ b/src/main/java/org/bukkit/craftbukkit/util/CraftMagicNumbers.java
@@ -1,5 +1,6 @@
 package org.bukkit.craftbukkit.util;
 
+import com.destroystokyo.paper.PaperConfig;
 import com.google.common.base.Charsets;
 import com.google.common.base.Preconditions;
 import com.google.common.collect.Maps;
@@ -558,6 +559,11 @@ public final class CraftMagicNumbers implements UnsafeValues {
         Preconditions.checkArgument(material.isBlock(), material + " is not a block");
         return getBlock(material).hasCollision;
     }
+
+    @Override
+    public List<String> getLibraryLoaderRepos() {
+        return PaperConfig.repos;
+    }
     // Paper end
 
     /**
