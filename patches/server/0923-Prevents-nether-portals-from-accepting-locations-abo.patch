From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Big-Crazy <dogwithhats@gmail.com>
Date: Fri, 7 Oct 2022 13:16:47 -0400
Subject: [PATCH] Prevents nether portals from accepting locations above the
 nether ceiling as valid locations for generating portals / teleporting
 entities


diff --git a/src/main/java/net/minecraft/world/level/portal/PortalForcer.java b/src/main/java/net/minecraft/world/level/portal/PortalForcer.java
index eefd322613ba2bd3b6dcd99aec74de617c6112c6..1cebe33d6fcd3d2c7331a7a4bb5048d286daa274 100644
--- a/src/main/java/net/minecraft/world/level/portal/PortalForcer.java
+++ b/src/main/java/net/minecraft/world/level/portal/PortalForcer.java
@@ -126,23 +126,18 @@ public class PortalForcer {
 
             j = Math.min(i, this.level.getHeight(Heightmap.Types.MOTION_BLOCKING, blockposition_mutableblockposition1.getX(), blockposition_mutableblockposition1.getZ()));
             boolean flag = true;
-
             //check to see if the portal is trying to generate below nether-ceiling-void-damage-height
             if (j < entity.level.paperConfig().environment.netherCeilingVoidDamageHeight) {
-
-                if (worldborder.isWithinBounds((BlockPos) blockposition_mutableblockposition1) && worldborder.isWithinBounds((BlockPos) blockposition_mutableblockposition1.move(enumdirection, 1))) {
+            if (worldborder.isWithinBounds((BlockPos) blockposition_mutableblockposition1) && worldborder.isWithinBounds((BlockPos) blockposition_mutableblockposition1.move(enumdirection, 1))) {
                     blockposition_mutableblockposition1.move(enumdirection.getOpposite(), 1);
-
                     for (k = j; k >= this.level.getMinBuildHeight(); --k) {
                         blockposition_mutableblockposition1.setY(k);
                         if (this.level.isEmptyBlock(blockposition_mutableblockposition1)) {
                             for (l = k; k > this.level.getMinBuildHeight() && this.level.isEmptyBlock(blockposition_mutableblockposition1.move(Direction.DOWN)); --k) {
                                 ;
                             }
-
                             if (k + 4 <= i) {
                                 int i1 = l - k;
-
                                 if (i1 <= 0 || i1 >= 3) {
                                     blockposition_mutableblockposition1.setY(k);
                                     if (this.canHostFrame(blockposition_mutableblockposition1, blockposition_mutableblockposition, enumdirection, 0)) {
