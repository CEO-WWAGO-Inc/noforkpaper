From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Owen1212055 <23108066+Owen1212055@users.noreply.github.com>
Date: Fri, 9 Jun 2023 22:49:45 -0400
Subject: [PATCH] Player standing on position API


diff --git a/src/main/java/org/bukkit/entity/Entity.java b/src/main/java/org/bukkit/entity/Entity.java
index 6ace3581f8d0c2a1b7e2188d5b6af5c984b74a0e..0353cec334da6468c78d274f460be322c67edf85 100644
--- a/src/main/java/org/bukkit/entity/Entity.java
+++ b/src/main/java/org/bukkit/entity/Entity.java
@@ -1107,4 +1107,44 @@ public interface Entity extends Metadatable, CommandSender, Nameable, Persistent
      */
     @NotNull String getScoreboardEntryName();
     // Paper end - entity scoreboard name
+    // Paper start - Player standing on position API
+    /**
+     * Gets the position of the block that is currently being used to calculate movement affects (i.e friction) on the entity.
+     * <p>
+     * Examples:
+     * - When standing on a slab under an ice block, this will return the position of the ice block.
+     * - When flying on top of a flower located under a grass block this will return the position of the grass block (although this technically will not affect your movement).
+     *
+     * @return block position used for movement affects
+     */
+    @NotNull
+    Location getMovementAffectingBlock();
+
+    /**
+     * Gets the position of the the that is currently under the entity.
+     * This will return {@link Entity#getSupportingBlock()} as long as it is not null,
+     * else it will instead return the bottom most block at the entity's hitbox.
+     * <p>
+     * Examples:
+     * - When standing on a slab under an ice block, this will return the position of the slab.
+     * - When flying on top of a flower located under a grass block this will return the position of the flower.
+     *
+     * @return {@link Entity#getSupportingBlock()} if not null or the entity's bottom most block
+     */
+    @NotNull
+    Location getStandingPosition();
+
+    /**
+     * Gets the position of the block that is currently supporting the entity.
+     * This takes into account the collisions of blocks under the entity.
+     * <p>
+     * Examples:
+     * - When standing on a slab under an ice block, this will return the position of the slab.
+     * - When flying on top of a flower located under a grass block this will return null, because no block is holding your location.
+     *
+     * @return block position currently supporting the entity, or null if a block is currently not supporting the entity
+     */
+    @Nullable
+    Location getSupportingBlock();
+    // Paper end
 }
