From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Fri, 19 Jan 2018 00:29:28 -0500
Subject: [PATCH] Add setPlayerProfile API for Skulls

This allows you to create already filled textures on Skulls to avoid texture lookups
which commonly cause rate limit issues with Mojang API

diff --git a/src/main/java/org/bukkit/block/Skull.java b/src/main/java/org/bukkit/block/Skull.java
index 83ca284e02f0c2229126d8f40cb33b18f44524d3..667f0586aa842a34a3ee33a9df09235b9ac0dc0c 100644
--- a/src/main/java/org/bukkit/block/Skull.java
+++ b/src/main/java/org/bukkit/block/Skull.java
@@ -8,6 +8,7 @@ import org.bukkit.profile.PlayerProfile;
 import org.jetbrains.annotations.Contract;
 import org.jetbrains.annotations.NotNull;
 import org.jetbrains.annotations.Nullable;
+import com.destroystokyo.paper.profile.PlayerProfile; // Paper
 
 /**
  * Represents a captured state of a skull block.
@@ -62,6 +63,20 @@ public interface Skull extends TileState {
      */
     public void setOwningPlayer(@NotNull OfflinePlayer player);
 
+    // Paper start
+    /**
+     * Sets this skull to use the supplied Player Profile, which can include textures already prefilled.
+     * @param profile The profile to set this Skull to use, may not be null
+     */
+    void setPlayerProfile(@NotNull PlayerProfile profile);
+
+    /**
+     * If the skull has an owner, per {@link #hasOwner()}, return the owners {@link PlayerProfile}
+     * @return The profile of the owner, if set
+     */
+    @Nullable PlayerProfile getPlayerProfile();
+    // Paper end
+
     /**
      * Gets the profile of the player who owns the skull. This player profile
      * may appear as the texture depending on skull type.
diff --git a/src/main/java/org/bukkit/inventory/meta/SkullMeta.java b/src/main/java/org/bukkit/inventory/meta/SkullMeta.java
index dcefd0eea9461441c4209d587896d704389487d0..3924c772d005b32fa862b7a14864379b92ef3899 100644
--- a/src/main/java/org/bukkit/inventory/meta/SkullMeta.java
+++ b/src/main/java/org/bukkit/inventory/meta/SkullMeta.java
@@ -1,10 +1,12 @@
 package org.bukkit.inventory.meta;
 
+import com.destroystokyo.paper.profile.PlayerProfile;
 import org.bukkit.OfflinePlayer;
 import org.bukkit.profile.PlayerProfile;
 import org.jetbrains.annotations.NotNull;
 import org.jetbrains.annotations.Nullable;
 
+
 /**
  * Represents a skull that can have an owner.
  */
@@ -37,6 +39,20 @@ public interface SkullMeta extends ItemMeta {
     @Deprecated
     boolean setOwner(@Nullable String owner);
 
+    // Paper start
+    /**
+     * Sets this skull to use the supplied Player Profile, which can include textures already prefilled.
+     * @param profile The profile to set this Skull to use, or null to clear owner
+     */
+    void setPlayerProfile(@Nullable PlayerProfile profile);
+
+    /**
+     * If the skull has an owner, per {@link #hasOwner()}, return the owners {@link PlayerProfile}
+     * @return The profile of the owner, if set
+     */
+    @Nullable PlayerProfile getPlayerProfile();
+    // Paper end
+
     /**
      * Gets the owner of the skull.
      *
