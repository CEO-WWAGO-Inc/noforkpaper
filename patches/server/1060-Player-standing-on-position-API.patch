From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Owen1212055 <23108066+Owen1212055@users.noreply.github.com>
Date: Fri, 9 Jun 2023 22:49:38 -0400
Subject: [PATCH] Player standing on position API

== AT ==
public net.minecraft.world.entity.Entity getBlockPosBelowThatAffectsMyMovement()Lnet/minecraft/core/BlockPos;

diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftEntity.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftEntity.java
index 1c3e1153d08b59d29b3613fc3b50a4780aa7a3ac..443b7e52f2bac95de9433d3927ab4d732c03f20a 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftEntity.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftEntity.java
@@ -1227,4 +1227,24 @@ public abstract class CraftEntity implements org.bukkit.entity.Entity {
         return this.getHandle().getScoreboardName();
     }
     // Paper end - entity scoreboard name
+    // Paper start - Player standing on position API
+    @Override
+    public io.papermc.paper.math.BlockPosition getMovementAffectingBlock() {
+        net.minecraft.core.BlockPos blockPos = this.getHandle().getBlockPosBelowThatAffectsMyMovement();
+        return io.papermc.paper.math.Position.block(blockPos.getX(), blockPos.getY(), blockPos.getZ());
+    }
+
+    @Override
+    public io.papermc.paper.math.BlockPosition getStandingPosition() {
+        net.minecraft.core.BlockPos blockPos = this.getHandle().getOnPos();
+        return io.papermc.paper.math.Position.block(blockPos.getX(), blockPos.getY(), blockPos.getZ());
+    }
+
+    @Override
+    public io.papermc.paper.math.BlockPosition getSupportingBlock() {
+        return this.getHandle().mainSupportingBlockPos
+            .map((func) -> io.papermc.paper.math.Position.block(func.getX(), func.getY(), func.getZ()))
+            .orElse(null);
+    }
+    // Paper end - Player standing on position API
 }
